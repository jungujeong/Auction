<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('경매 목록 - 중고경매')}"></head>
<body>
    <div th:replace="~{fragments/layout :: navbar}"></div>

    <div class="container">
        <h1 class="section-title mt-4">경매 목록</h1>

        <div class="grid" th:if="${items != null and !items.isEmpty()}">
            <div class="item-card" th:each="item : ${items}"
                 th:data-url="@{/items/{id}(id=${item.id})}"
                 onclick="location.href=this.getAttribute('data-url')"
                 style="cursor: pointer;">
                <img th:src="@{${item.imageUrl != null ? item.imageUrl : 'https://via.placeholder.com/300x200?text=No+Image'}}"
                     th:alt="${item.title}">
                <div class="item-card-content">
                    <h3 th:text="${item.title}">물건 제목</h3>
                    <p class="price" th:text="${#numbers.formatInteger(item.currentPrice, 0, 'COMMA')} + '원'">0원</p>
                    <p class="meta">
                        시작가: <span th:text="${#numbers.formatInteger(item.startPrice, 0, 'COMMA')} + '원'">0원</span><br>
                        판매자: <span th:text="${item.seller.username}">판매자</span><br>
                        종료: <span th:text="${#temporals.format(item.endTime, 'yyyy-MM-dd HH:mm')}">2024-01-01 00:00</span>
                    </p>
                    <span class="status"
                          th:classappend="${item.status.name() == 'RECRUITING' ? 'active' :
                                         (item.status.name() == 'AUCTION_STARTED' ? 'active' :
                                         (item.status.name() == 'AUCTION_ENDED' ? 'ended' : 'sold'))}"
                          th:text="${item.status.name() == 'RECRUITING' ? '모집중' :
                                   (item.status.name() == 'AUCTION_STARTED' ? '진행중' :
                                   (item.status.name() == 'AUCTION_ENDED' ? '종료' :
                                   (item.status.name() == 'SOLD' ? '판매완료' : '삭제됨')))}">
                        모집중
                    </span>
                </div>
            </div>
        </div>

        <p class="text-center" th:if="${items == null or items.isEmpty()}">
            등록된 경매가 없습니다.
        </p>
    </div>

    <footer th:replace="~{fragments/layout :: footer}"></footer>
</body>
</html>
